var e=[{id:"bsb",name:"Burgundy School of Business"},{id:"edhec",name:"EDHEC Business School"},{id:"emstra",name:"EM Strasbourg INSIDE"},{id:"esarc",name:"ESARC go",casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"04a71590-4e7e-013d-0d74-4224903aba3737627",scope:"openid+profile+email+params+groups",uriend:!1},{id:"esg",name:"ESG Live",casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"9ffb9be0-4e7d-013d-5b5d-123144e9468637627",scope:"openid+profile+email+params+groups",uriend:!1},{id:"essec",name:"ESSEC Business School"},{id:"digitalcampus",name:"GGE - Digital Campus",casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"63a20580-4e7f-013d-983f-3ae74bc6093237627",scope:"openid+profile+email+params+groups",uriend:!1},{id:"macromedia",name:"Galileo Global Education Germany",casurl:"https://gge-deu.onelogin.com/oidc/2/auth",clientid:"ba5a9ba0-88f8-013a-9a42-02ce5bf6a8b437628",scope:"openid+profile+email+params+groups",uriend:!1},{id:"hec",name:"HEC Paris"},{id:"icp",name:"ICP"},{id:"ipp",name:"IP Paris Campus"},{id:"ieu",name:"Instituto de Estudios Universitarios"},{id:"ieseg",name:"IÉSEG Connect"},{id:"lisaa",name:"LISAA Campus",casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"29e9c370-4e80-013d-885d-0abcaae3a4cf37627",scope:"openid+profile+email+params+groups",uriend:!1},{id:"merkure",name:"Merkure Live",casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"f2d6ed00-7e43-013d-0e35-020afc8f024837627",scope:"openid+profile+email+params+groups",uriend:!1},{id:"mbs",name:"Montpellier Business School"},{id:"eigsi",name:"My EIGSI"},{id:"essca",name:"My ESSCA"},{id:"ucly",name:"My Ucly"},{id:"alijia",name:"MyELIJE",casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"df9f8d90-4e7e-013d-9599-3e3983e056fd37627",scope:"openid+profile+email+params+groups",uriend:!1},{id:"epp",name:"MyEPP"},{id:"esigelec",name:"MyESIGELEC"},{id:"estp",name:"MyESTP"},{id:"esaip",name:"MyEsaip"},{id:"iicp",name:"Narratiiv Inside",casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"2fe63b60-bff1-013b-ddc6-0668df09704237627",scope:"openid+profile+email+params+groups",uriend:!1},{id:"domus",name:"Nuova Accademia: MyDA"},{id:"ueve",name:"OFIL UnivEvry"},{id:"pstb",name:"PSTB",casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"23cc4030-4e7d-013d-b0f6-4e4814bd4e6d37627",scope:"openid+profile+email+params+groups",uriend:!1},{id:"psb",name:"Paris School Of Business"},{id:"regent",name:"Regent's University London",casurl:"https://gge-gbr.onelogin.com/oidc/2/auth",clientid:"d29993a0-6b00-013a-7b8e-02732a18081038446",scope:"openid+profile+email+params+groups",uriend:!1},{id:"sciencespo",name:"Sciences Po"},{id:"scpoaix",name:"Sciences Po Aix"},{id:"ubmont",name:"Université Bordeaux Montaigne"},{id:"uclouvain",name:"Université Catholique de Louvain"},{id:"unieiffel",name:"Université Gustave Eiffel",casurl:"https://cas.univ-eiffel.fr/oidc/authorize",clientid:"726a397e14d8465e80a46202",uriend:!0},{id:"unilyon3",name:"Université Jean Moulin Lyon3"},{id:"uniassas",name:"Université Paris-Panthéon-Assas",casurl:"https://cas.u-paris2.fr/cas/oidc/authorize",clientid:"973379d68bb7da4533b84c45eaf2c9fd",uriend:!0},{id:"univangers",name:"Université d'Angers"},{id:"unimons",name:"Université de Mons"},{id:"unimes",name:"Université de Nîmes"},{id:"upjv",name:"Université de Picardie Jules Verne",casurl:"https://cas.u-picardie.fr/oidc/authorize",clientid:"AppSchoProd",uriend:!0},{id:"univpoitiers",name:"Université de Poitiers"},{id:"unitoulon",name:"Université de Toulon",casurl:"https://cas.univ-tln.fr/cas/oidc/authorize",clientid:"appscho",uriend:!1},{id:"wsfactory",name:"Web School Factory",casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"269eb430-4e7f-013d-80d4-06e3653b829437627",scope:"openid+profile+email+params+groups",uriend:!1}],a=e=>`https://api.appscho.com/${e}`,n=e=>`https://my.appscho.com/api/${e}`,t=e=>`https://feed.appscho.com/api/m/v1/${e}`,o=async e=>(await fetch(`${a(e)}/career/events`)).json(),s=class extends Error{constructor(e){super(e),this.name="AppSchoError"}},r=class extends s{constructor(e){super(`CAS authentication is not supported for instance "${e}"`),this.name="CASNotSupportedError"}},i=class extends s{constructor(){super("Internal server error, please try again later"),this.name="InternalServerError"}},c=class extends s{constructor(){super("Your account does not have a planning subscription, please check your intranet"),this.name="NoPlanningSubscriptionError"}},d=class extends s{constructor(){super("Not found, your instance probably doesn't have this feature"),this.name="NotFoundError"}},p=class extends s{constructor(){super("Unauthorized, please check your credentials or token"),this.name="UnauthorizedError"}},u=e=>{switch(e.state){case"ok":return e.response;case"unauthorized":throw new p;case"internal_server_error":throw new i;default:throw new d}},h=async(e,n)=>{const t=await fetch(`${a(e)}/crous`,{headers:{"X-Appscho-Token":n}}),o=await t.json();return u(o)},l=async(e,n,t)=>{const o=await fetch(`${a(e)}/crous/${t}/restaurants`,{headers:{"X-Appscho-Token":n}}),s=await o.json();return u(s)},m=async e=>{const n=await fetch(`${a(e)}/events`),t=await n.json();return u(t)},f=async e=>(await fetch(`${n(e)}/webviews`)).json(),w=async e=>{const n=await fetch(`${a(e)}/facebook`),t=await n.json();return u(t)},g=async e=>(await fetch(`${t(e)}/channels`)).json(),y=async e=>(await fetch(`${t(e)}/posts`)).json(),E=async e=>(await fetch(`https://my.appscho.com/api/v3/${e}/knowledgebase`)).json(),b=async e=>(await fetch(`${n(e)}/locations`)).json(),$=async(e,n,t)=>{try{const o=await fetch(`${a(e)}/login`,{headers:{"X-Appscho-EncodedToken":"1","X-Appscho-Id":n,"X-Appscho-Token":btoa(t)}});if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const s=await o.json();return u(s)}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw new Error("Network error: Unable to connect to AppScho API");throw e}},k=a=>{const n=e.find(e=>e.id===a);if(!n)throw new Error(`Unknown instance: ${a}`);if(!n.casurl||!n.clientid)throw new r(a)},v=a=>{k(a);const n=e.find(e=>e.id===a),t=((e=8)=>{const a="0123456789ABCDEF";let n="";for(let t=0;t<e;t++)n+=a.charAt(Math.floor(16*Math.random()));return n})(8),o=!1===n.uriend?`https://${a}.callback.oauth.appscho.com`:`https://${a}.callback.oauth.appscho.com/`;let s=new URLSearchParams({client_id:n.clientid,redirect_uri:o,response_type:"code",state:t}).toString();return n.scope&&(s+=`&scope=${n.scope}`),`${n.casurl}?${s}`},S=async(e,n)=>{try{k(e);const t=await fetch(`${a(e)}/oauth/token`,{body:`code=${n}&grant_type=authorization_code`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(!t.ok)throw new Error(`OAuth token exchange failed: ${t.status} ${t.statusText}`);const o=await t.json();if(!o.access_token)throw new Error("Invalid OAuth response: missing access_token");const s=await fetch(`${a(e)}/whoami`,{headers:{"X-Appscho-Token":o.access_token}});if(!s.ok)throw new Error(`User data fetch failed: ${s.status} ${s.statusText}`);const r=await s.json();return((e,a,n)=>({firstname:e.firstname,id_token:e.id_token,lastname:e.lastname,picture:e.picture||"",program:e.program,refreshToken:n,token:a}))(u(r),o.access_token,o.refresh_token)}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw new Error("Network error: Unable to connect to AppScho API");throw e}},A=async(e,n)=>{try{if(!n)throw new Error("Refresh token is required");const t=await fetch(`${a(e)}/oauth/refresh`,{body:`refresh_token=${n}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(!t.ok)throw new Error(`Token refresh failed: ${t.status} ${t.statusText}`);const o=await t.json();if(!o.access_token)throw new Error("Invalid refresh response: missing access_token");return o}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw new Error("Network error: Unable to connect to AppScho API");throw e}},T=async(e,a)=>{const n=await fetch(`https://metadata.appscho.com/versions/${e}/${a}/production`),t=await n.json();return u(t)},P=async e=>{const n=await fetch(`${a(e)}/news`),t=await n.json();return u(t)},U=async(e,n)=>{try{const t=await fetch(`${a(e)}/planning`,{headers:{"X-Appscho-Token":n}});if(500===t.status)throw new c;if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const o=await t.json();return u(o)}catch(e){if(e instanceof c)throw e;if(e instanceof TypeError&&e.message.includes("fetch"))throw new Error("Network error: Unable to connect to AppScho API");throw e}},j=async e=>(await fetch(`${n(e)}/profiles`)).json(),I=async e=>(await fetch(`${n(e)}/quickaccess`)).json(),x=async e=>{const n=await fetch(`${a(e)}/twitter`),t=await n.json();return u(t)},C=async e=>{const n=await fetch(`${a(e)}/youtube`),t=await n.json();return u(t)};export{s as AppSchoError,r as CASNotSupportedError,e as INSTANCES,i as InternalServerError,c as NoPlanningSubscriptionError,d as NotFoundError,p as UnauthorizedError,v as getCASURL,o as getCareerEvents,h as getCrous,l as getCrousRestaurants,m as getEventsFeed,f as getExternalServices,w as getFacebookFeed,g as getFeedChannels,y as getFeedPosts,E as getKnowledgebase,b as getLocations,T as getMetadata,P as getNewsFeed,U as getPlanning,j as getProfiles,I as getQuickAccesses,x as getTwitterFeed,C as getYouTubeFeed,$ as loginWithCredentials,S as loginWithOAuth,A as refreshOAuthToken};//# sourceMappingURL=index.mjs.map