"use strict";var e=Object.getOwnPropertyNames,o=(o,s)=>function(){return s||(0,o[e(o)[0]])((s={exports:{}}).exports,s),s.exports},s=o({"src/logos/bsb.webp"(e,o){o.exports="./bsb-TKZRQ6KR.webp"}}),r=o({"src/logos/edhec.webp"(e,o){o.exports="./edhec-TJ452NSK.webp"}}),t=o({"src/logos/emstra.webp"(e,o){o.exports="./emstra-QT2IABQQ.webp"}}),a=o({"src/logos/esarc.webp"(e,o){o.exports="./esarc-5TRD7J6I.webp"}}),n=o({"src/logos/esg.webp"(e,o){o.exports="./esg-ZYBJCWQP.webp"}}),i=o({"src/logos/essec.webp"(e,o){o.exports="./essec-VA3ZOB2R.webp"}}),c=o({"src/logos/digitalcampus.webp"(e,o){o.exports="./digitalcampus-JZXHMFUF.webp"}}),p=o({"src/logos/macromedia.webp"(e,o){o.exports="./macromedia-AVSMSV75.webp"}}),l=o({"src/logos/hec.webp"(e,o){o.exports="./hec-ZXKJ3H7B.webp"}}),u=o({"src/logos/ipp.webp"(e,o){o.exports="./ipp-B54TFAVY.webp"}}),g=o({"src/logos/ieu.webp"(e,o){o.exports="./ieu-V4NG2Z3M.webp"}}),d=o({"src/logos/iseg.webp"(e,o){o.exports="./iseg-YWYEP2TW.webp"}}),w=o({"src/logos/lisaa.webp"(e,o){o.exports="./lisaa-G5QFTSTN.webp"}}),h=o({"src/logos/merkure.webp"(e,o){o.exports="./merkure-BZGTBAZV.webp"}}),b=o({"src/logos/mbs.webp"(e,o){o.exports="./mbs-HW7O3ZL5.webp"}}),m=o({"src/logos/eigsi.webp"(e,o){o.exports="./eigsi-FJWLQTER.webp"}}),f=o({"src/logos/essca.webp"(e,o){o.exports="./essca-EX7GUUTC.webp"}}),x=o({"src/logos/ucly.webp"(e,o){o.exports="./ucly-IR4N2QZW.webp"}}),E=o({"src/logos/alijia.webp"(e,o){o.exports="./alijia-C25CI2DQ.webp"}}),y=o({"src/logos/epp.webp"(e,o){o.exports="./epp-3IP2ORXZ.webp"}}),v=o({"src/logos/esigelec.webp"(e,o){o.exports="./esigelec-JI2BSXJN.webp"}}),k=o({"src/logos/estp.webp"(e,o){o.exports="./estp-K3GBF5RT.webp"}}),A=o({"src/logos/esaip.webp"(e,o){o.exports="./esaip-YAZ22MDX.webp"}}),T=o({"src/logos/iicp.webp"(e,o){o.exports="./iicp-2ETKCBI7.webp"}}),S=o({"src/logos/ueve.webp"(e,o){o.exports="./ueve-IXCQ2MVR.webp"}}),$=o({"src/logos/pstb.webp"(e,o){o.exports="./pstb-5RQCEMVP.webp"}}),P=o({"src/logos/regent.webp"(e,o){o.exports="./regent-V6XWU57E.webp"}}),C=o({"src/logos/sciencepo.webp"(e,o){o.exports="./sciencepo-4WGAYHW6.webp"}}),I=o({"src/logos/scpoaix.webp"(e,o){o.exports="./scpoaix-7GMYRU77.webp"}}),U=o({"src/logos/ubmont.webp"(e,o){o.exports="./ubmont-3PAQQVRM.webp"}}),j=o({"src/logos/uclouvain.webp"(e,o){o.exports="./uclouvain-ZCEZCDPI.webp"}}),N=o({"src/logos/univeiffel.webp"(e,o){o.exports="./univeiffel-XCNESZK4.webp"}}),M=o({"src/logos/unilyon3.webp"(e,o){o.exports="./unilyon3-UDOJOAD2.webp"}}),F=o({"src/logos/uniassas.webp"(e,o){o.exports="./uniassas-3VITEDIH.webp"}}),B=o({"src/logos/univangers.webp"(e,o){o.exports="./univangers-ZTATBHH4.webp"}}),_=o({"src/logos/unimons.webp"(e,o){o.exports="./unimons-J36T7KAA.webp"}}),O=o({"src/logos/unimes.webp"(e,o){o.exports="./unimes-PKQMVO6A.webp"}}),G=o({"src/logos/upjv.webp"(e,o){o.exports="./upjv-7ENFGF7C.webp"}}),R=o({"src/logos/univpoitiers.webp"(e,o){o.exports="./univpoitiers-4XAKQR7C.webp"}}),X=o({"src/logos/unitoulon.webp"(e,o){o.exports="./unitoulon-BXTPHZTQ.webp"}}),Q=[{id:"bsb",logo:"~/logos/bsb.webp",name:"Burgundy School of Business"},{id:"edhec",logo:"~/logos/edhec.webp",name:"EDHEC Business School"},{id:"emstra",logo:"~/logos/emstra.webp",name:"EM Strasbourg INSIDE"},{casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"04a71590-4e7e-013d-0d74-4224903aba3737627",id:"esarc",logo:"~/logos/esarc.webp",name:"ESARC go",scope:"openid+profile+email+params+groups",uriend:!1},{casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"9ffb9be0-4e7d-013d-5b5d-123144e9468637627",id:"esg",logo:"~/logos/esg.webp",name:"ESG Live",scope:"openid+profile+email+params+groups",uriend:!1},{id:"essec",logo:"~/logos/essec.webp",name:"ESSEC Business School"},{casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"63a20580-4e7f-013d-983f-3ae74bc6093237627",id:"digitalcampus",logo:"~/logos/digitalcampus.webp",name:"GGE - Digital Campus",scope:"openid+profile+email+params+groups",uriend:!1},{casurl:"https://gge-deu.onelogin.com/oidc/2/auth",clientid:"ba5a9ba0-88f8-013a-9a42-02ce5bf6a8b437628",id:"macromedia",logo:"~/logos/macromedia.webp",name:"Galileo Global Education Germany",scope:"openid+profile+email+params+groups",uriend:!1},{id:"hec",logo:"~/logos/hec.webp",name:"HEC Paris"},{id:"icp",logo:"~/logos/icp.png",name:"ICP"},{id:"ipp",logo:"~/logos/ipp.webp",name:"IP Paris Campus"},{id:"ieu",logo:"~/logos/ieu.webp",name:"Instituto de Estudios Universitarios"},{id:"ieseg",logo:"~/logos/iseg.webp",name:"IÉSEG Connect"},{casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"29e9c370-4e80-013d-885d-0abcaae3a4cf37627",id:"lisaa",logo:"~/logos/lisaa.webp",name:"LISAA Campus",scope:"openid+profile+email+params+groups",uriend:!1},{casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"f2d6ed00-7e43-013d-0e35-020afc8f024837627",id:"merkure",logo:"~/logos/merkure.webp",name:"Merkure Live",scope:"openid+profile+email+params+groups",uriend:!1},{id:"mbs",logo:"~/logos/mbs.webp",name:"Montpellier Business School"},{id:"eigsi",logo:"~/logos/eigsi.webp",name:"My EIGSI"},{id:"essca",logo:"~/logos/essca.webp",name:"My ESSCA"},{id:"ucly",logo:"~/logos/ucly.webp",name:"My Ucly"},{casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"df9f8d90-4e7e-013d-9599-3e3983e056fd37627",id:"alijia",logo:"~/logos/alijia.webp",name:"MyELIJE",scope:"openid+profile+email+params+groups",uriend:!1},{id:"epp",logo:"~/logos/epp.webp",name:"MyEPP"},{id:"esigelec",logo:"~/logos/esigelec.webp",name:"MyESIGELEC"},{id:"estp",logo:"~/logos/estp.webp",name:"MyESTP"},{id:"esaip",logo:"~/logos/esaip.webp",name:"MyEsaip"},{casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"2fe63b60-bff1-013b-ddc6-0668df09704237627",id:"iicp",logo:"~/logos/iicp.webp",name:"Narratiiv Inside",scope:"openid+profile+email+params+groups",uriend:!1},{id:"domus",name:"Nuova Accademia: MyDA"},{id:"ueve",logo:"~/logos/ueve.webp",name:"OFIL UnivEvry"},{casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"23cc4030-4e7d-013d-b0f6-4e4814bd4e6d37627",id:"pstb",logo:"~/logos/pstb.webp",name:"PSTB",scope:"openid+profile+email+params+groups",uriend:!1},{id:"psb",logo:"~/logos/psb.jpg",name:"Paris School Of Business"},{casurl:"https://gge-gbr.onelogin.com/oidc/2/auth",clientid:"d29993a0-6b00-013a-7b8e-02732a18081038446",id:"regent",logo:"~/logos/regent.webp",name:"Regent's University London",scope:"openid+profile+email+params+groups",uriend:!1},{id:"sciencespo",logo:"~/logos/sciencepo.webp",name:"Sciences Po"},{id:"scpoaix",logo:"~/logos/scpoaix.webp",name:"Sciences Po Aix"},{id:"ubmont",logo:"~/logos/ubmont.webp",name:"Université Bordeaux Montaigne"},{id:"uclouvain",logo:"~/logos/uclouvain.webp",name:"Université Catholique de Louvain"},{casurl:"https://cas.univ-eiffel.fr/oidc/authorize",clientid:"726a397e14d8465e80a46202",id:"unieiffel",logo:"~/logos/univeiffel.webp",name:"Université Gustave Eiffel",uriend:!0},{id:"unilyon3",logo:"~/logos/unilyon3.webp",name:"Université Jean Moulin Lyon3"},{casurl:"https://cas.u-paris2.fr/cas/oidc/authorize",clientid:"973379d68bb7da4533b84c45eaf2c9fd",id:"uniassas",logo:"~/logos/uniassas.webp",name:"Université Paris-Panthéon-Assas",uriend:!0},{id:"univangers",logo:"~/logos/univangers.webp",name:"Université d'Angers"},{id:"unimons",logo:"~/logos/unimons.webp",name:"Université de Mons"},{id:"unimes",logo:"~/logos/unimes.webp",name:"Université de Nîmes"},{casurl:"https://cas.u-picardie.fr/oidc/authorize",clientid:"AppSchoProd",id:"upjv",logo:"~/logos/upjv.webp",name:"Université de Picardie Jules Verne",uriend:!0},{id:"univpoitiers",logo:"~/logos/univpoitiers.webp",name:"Université de Poitiers"},{casurl:"https://cas.univ-tln.fr/cas/oidc/authorize",clientid:"appscho",id:"unitoulon",logo:"~/logos/unitoulon.webp",name:"Université de Toulon",uriend:!1},{casurl:"https://gge-fra.onelogin.com/oidc/2/auth",clientid:"269eb430-4e7f-013d-80d4-06e3653b829437627",id:"wsfactory",logo:"~/logos/wsfactory.png",name:"Web School Factory",scope:"openid+profile+email+params+groups",uriend:!1}],Z=e=>`https://api.appscho.com/${e}`,J=e=>`https://my.appscho.com/api/${e}`,L=e=>`https://feed.appscho.com/api/m/v1/${e}`,W=class extends Error{constructor(e){super(e),this.name="AppSchoError"}},V=class extends W{constructor(e){super(`CAS authentication is not supported for instance "${e}"`),this.name="CASNotSupportedError"}},D=class extends W{constructor(){super("Internal server error, please try again later"),this.name="InternalServerError"}},H=class extends W{constructor(){super("Your account does not have a planning subscription, please check your intranet"),this.name="NoPlanningSubscriptionError"}},K=class extends W{constructor(){super("Not found, your instance probably doesn't have this feature"),this.name="NotFoundError"}},z=class extends W{constructor(){super("Unauthorized, please check your credentials or token"),this.name="UnauthorizedError"}},Y=e=>{switch(e.state){case"ok":return e.response;case"unauthorized":throw new z;case"internal_server_error":throw new D;default:throw new K}},q=e=>{try{const o=(e=>{try{const o=e.split(".");if(3!==o.length)throw new Error("Invalid JWT format");const s=o[1];return JSON.parse(atob(s.replace(/-/g,"+").replace(/_/g,"/")))}catch(e){throw new Error(`Failed to decode JWT: ${e instanceof Error?e.message:"Unknown error"}`)}})(e);return o.department||null}catch(e){return null}},ee=(e,o,s)=>({department:q(o),firstname:e.firstname,id_token:e.id_token,lastname:e.lastname,picture:e.picture||"",program:e.program,refreshToken:s,token:o}),oe=e=>{const o=Q.find(o=>o.id===e);if(!o)throw new Error(`Unknown instance: ${e}`);if(!o.casurl||!o.clientid)throw new V(e)},se=async(e,o)=>{try{if(!o)throw new Error("Refresh token is required");const s=await fetch(`${Z(e)}/oauth/refresh`,{body:`refresh_token=${o}`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(!s.ok)throw new Error(`Token refresh failed: ${s.status} ${s.statusText}`);const r=await s.json();if(!r.access_token)throw new Error("Invalid refresh response: missing access_token");return r}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw new Error("Network error: Unable to connect to AppScho API");throw e}},re={bsb:s(),edhec:r(),emstra:t(),esarc:a(),esg:n(),essec:i(),digitalcampus:c(),macromedia:p(),hec:l(),ipp:u(),ieu:g(),iseg:d(),lisaa:w(),merkure:h(),mbs:b(),eigsi:m(),essca:f(),ucly:x(),alijia:E(),epp:y(),esigelec:v(),estp:k(),esaip:A(),iicp:T(),ueve:S(),pstb:$(),regent:P(),sciencepo:C(),scpoaix:I(),ubmont:U(),uclouvain:j(),univeiffel:N(),unilyon3:M(),uniassas:F(),univangers:B(),unimons:_(),unimes:O(),upjv:G(),univpoitiers:R(),unitoulon:X()};exports.AppSchoError=W,exports.CASNotSupportedError=V,exports.INSTANCES=Q,exports.InternalServerError=D,exports.LOGOS=re,exports.NoPlanningSubscriptionError=H,exports.NotFoundError=K,exports.UnauthorizedError=z,exports.getCASURL=e=>{oe(e);const o=Q.find(o=>o.id===e),s=((e=8)=>{const o="0123456789ABCDEF";let s="";for(let r=0;r<e;r++)s+=o.charAt(Math.floor(16*Math.random()));return s})(8),r=!1===o.uriend?`https://${e}.callback.oauth.appscho.com`:`https://${e}.callback.oauth.appscho.com/`;let t=new URLSearchParams({client_id:o.clientid,redirect_uri:r,response_type:"code",state:s}).toString();return o.scope&&(t+=`&scope=${o.scope}`),`${o.casurl}?${t}`},exports.getCareerEvents=async e=>(await fetch(`${Z(e)}/career/events`)).json(),exports.getCrous=async(e,o)=>{const s=await fetch(`${Z(e)}/crous`,{headers:{"X-Appscho-Token":o}}),r=await s.json();return Y(r)},exports.getCrousRestaurants=async(e,o,s)=>{const r=await fetch(`${Z(e)}/crous/${s}/restaurants`,{headers:{"X-Appscho-Token":o}}),t=await r.json();return Y(t)},exports.getEventsFeed=async e=>{const o=await fetch(`${Z(e)}/events`),s=await o.json();return Y(s)},exports.getExternalServices=async e=>(await fetch(`${J(e)}/webviews`)).json(),exports.getFacebookFeed=async e=>{const o=await fetch(`${Z(e)}/facebook`),s=await o.json();return Y(s)},exports.getFeedChannels=async e=>(await fetch(`${L(e)}/channels`)).json(),exports.getFeedPosts=async e=>(await fetch(`${L(e)}/posts`)).json(),exports.getKnowledgebase=async e=>(await fetch(`https://my.appscho.com/api/v3/${e}/knowledgebase`)).json(),exports.getLocations=async e=>(await fetch(`${J(e)}/locations`)).json(),exports.getMetadata=async(e,o)=>{const s=await fetch(`https://metadata.appscho.com/versions/${e}/${o}/production`),r=await s.json();return Y(r)},exports.getNewsFeed=async e=>{const o=await fetch(`${Z(e)}/news`),s=await o.json();return Y(s)},exports.getPlanning=async(e,o)=>{try{const s=await fetch(`${Z(e)}/planning`,{headers:{"X-Appscho-Token":o}});if(500===s.status)throw new H;if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);const r=await s.json();return Y(r)}catch(e){if(e instanceof H)throw e;if(e instanceof TypeError&&e.message.includes("fetch"))throw new Error("Network error: Unable to connect to AppScho API");throw e}},exports.getProfiles=async e=>(await fetch(`${J(e)}/profiles`)).json(),exports.getQuickAccesses=async e=>(await fetch(`${J(e)}/quickaccess`)).json(),exports.getTwitterFeed=async e=>{const o=await fetch(`${Z(e)}/twitter`),s=await o.json();return Y(s)},exports.getYouTubeFeed=async e=>{const o=await fetch(`${Z(e)}/youtube`),s=await o.json();return Y(s)},exports.loginWithCredentials=async(e,o,s)=>{try{const r=await fetch(`${Z(e)}/login`,{headers:{"X-Appscho-EncodedToken":"1","X-Appscho-Id":o,"X-Appscho-Token":btoa(s)}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const t=await r.json(),a=Y(t),n=q(a.token);return{...a,department:n}}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw new Error("Network error: Unable to connect to AppScho API");throw e}},exports.loginWithOAuth=async(e,o)=>{try{oe(e);const s=await fetch(`${Z(e)}/oauth/token`,{body:`code=${o}&grant_type=authorization_code`,headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST"});if(!s.ok)throw new Error(`OAuth token exchange failed: ${s.status} ${s.statusText}`);const r=await s.json();if(!r.access_token)throw new Error("Invalid OAuth response: missing access_token");const t=await fetch(`${Z(e)}/whoami`,{headers:{"X-Appscho-Token":r.access_token}});if(!t.ok)throw new Error(`User data fetch failed: ${t.status} ${t.statusText}`);const a=await t.json(),n=Y(a);return ee(n,r.access_token,r.refresh_token)}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw new Error("Network error: Unable to connect to AppScho API");throw e}},exports.refreshOAuthToken=se,exports.refreshOAuthTokenWithUser=async(e,o)=>{try{const s=await se(e,o),r=await fetch(`${Z(e)}/whoami`,{headers:{"X-Appscho-Token":s.access_token}});if(!r.ok)throw new Error(`User data fetch failed: ${r.status} ${r.statusText}`);const t=await r.json(),a=Y(t);return ee(a,s.access_token,s.refresh_token)}catch(e){if(e instanceof TypeError&&e.message.includes("fetch"))throw new Error("Network error: Unable to connect to AppScho API");throw e}};//# sourceMappingURL=index.js.map